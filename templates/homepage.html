{% include 'partials/header.html' %}
<script src='/public/js/Chart.bundle.min.js'></script>
<div class="container" xmlns="http://www.w3.org/1999/html">


       <table class="table" style="margin-top: 150px;">

          <thead>
          <tr>
              <th>User</th>
              <th>Open Requests</th>
              <th>Closed Requests</th>
              <th>WIP Requests</th>
          </tr>
          </thead>
          <tbody>
          {% for key in user_info %}

          <tr>

              <td><p>{{ key }}</p></td> <!-- User name -->
              <td><p>{{ user_info.get(key).open_requests|length }}</p></td>
              <td><p>{{ user_info.get(key).closed_requests|length }} </p></td>
              <td><p>{{ user_info.get(key).wip_requests|length }}</p></td>
             </tr>

          {% endfor %}

          </tbody>

      </table>
    <div id="canvas-holder" style="width:40%">
        <canvas id="chart-area" />
    </div>
    <script>


      var data = [];
      var bgcol = [];
      var user = [];

      {% for key in user_info %}
        data.push( {{ user_info.get(key).open_requests|length }} );
        bgcol.push( '#'+(Math.random()*0xFFFFFF<<0).toString(16) );
        user.push( "{{ key }}");
      {% endfor %}
      var config = {
        type: 'pie',
        data: {
            datasets: [{
                data: data,
                backgroundColor: bgcol,
                label: 'Dataset 1'
            }],
            labels: user
        },
        options: {
            responsive: true
        }
    };
       window.onload = function() {
        var ctx = document.getElementById("chart-area").getContext("2d");
        window.myPie = new Chart(ctx, config);
    };


    </script>
{% include 'partials/footer.html' %}
